# Chapter 1: Introduction

 Application은 메모리상에 존재하는 프로세스와 프로세싱의 대상인 데이터로 구성되어 있다.
S/W 설계는 데이터를 도메인모델로 표현하고, 이를 실체화한 도메인객체들의 속성을 변경하는 기능들을 프로세스로 설계한다.

    Application은 도메인모델과 프로세스를 기반으로 동작한다.
    
    도메인 모델은 데이터를 표현하고, 프로세스는 데이터를 처리한다.
    도메인 모델과 프로세스는 Application의 핵심이다.

 물리적인 H/W에서 동작하는 S/W는 항상 멈출 수 있다. Application 이 멈추면, 프로세스는 멈추고 도메인객체는 메모리에서 사라진다.
Application이 재시작 될 때 다시 비즈니스를 이어 나가길 원한 다면, 도메인객체와 프로세스는 전원이 없어도 되는 디스크나 메모리에 저장 되어야 한다.
이것을 영속화(Persistence)라고 한다.

    도메인객체와 프로세스는 영속화 되어야 한다.
    
    프로세스는 코드나 빌드된 바이너리로 영속화 되어야 한다.
    도메인객체는 Database등에 데이터로 영속화 되어야 한다. 

도메인객체가 영속화 되는 장치는 메모리, 디스크, 데이터베이스, 파일시스템 등 다양하지만 대부분 도메인 모델은 데이터베이스에 저장된다.
데이터베이스의 저장량은 RAM보다 훨씬 크지만 느리다는 특징이 있다. 따라서 데이터베이스에 저장된 도메인객체를 메모리에 올려놓고, 프로세스가 도메인객체를 처리하는 것이 일반적이다.

    도메인객체는 메모리에 올려놓고, 프로세스가 도메인객체를 처리한다.
    프로세스가 도메인객체를 처리하고, 도메인객체의 속성이 변경되면 데이터베이스에 저장한다.


## 도메인객체는 언제 저장 되어야 하는가?

  도메인객체의 속성이 변경되면 저장 되어야 하지만, 프로세스가 도메인객체를 처리할 때마다 저장되면 성능이 떨어진다. 성능과 저장을 어떻게 균형을 맞출 것인가?

    도메인객체의 속성이 변경되면 저장한다.
    프로세스가 도메인객체를 처리할 때마다 저장하지 않는다.

  이것이 영속화의 기본 원칙이지만, 게임의 Save Point를 지정하 듯 저장시점을 지정하는 것이 일반적이다. 이는 '저장', '확인' 등의 명시적인 저장 시점을 지정하는 것이다.


    도메인객체가 프로세스의 결과로 속성이 바뀔 때 저장 되어야 한다.

도메인객체의 속성이란? 숫자, 문자, 날짜 등의 값이며, 상태로 표현 될 수 있지만, 모든 상태가 저장되어야 하는 것은 아니다.
예를 들어 사람의 생년월일(YYYY-MM-DD)과 투표권(현재 투표를 할 수 있냐?) 의 관계처럼 날짜가 바뀔 때마다 투표 가능여부를 데이터베이스에 저장하게 되면 시간이 지날때 마다 모든 사용자의 투표권을 데이터베이스에 변경해서 저장해야 한다.
이런 경우 투표권은 도메인 모델의 속성이 아니라 상태로 볼 수 있다. 이런 패턴은 피해야 한다.

    도메인 모델의 속성값이 변하는 것을 변경이다.
    도메인 모델의 속성값이 변하지 않는 것은 변경이 아니다.


앞으로 다룰 "변경관리"는 Monolithic Application과 Microservice Application에서 도메인객체를 변경하는 방법을 다룬다.

